<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Health Tracker</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="manifest" href="manifest.json">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
</head>
<body>
    <header class="app-header">
        <div class="header-content">
            <button class="menu-button" id="menuButton">
                <span class="material-icons">menu</span>
            </button>
            <h1 id="screenTitle">Health Tracker</h1>
        </div>
    </header>

    <nav class="side-menu" id="sideMenu">
        <ul>
            <li><a href="#" data-screen="home" class="menu-item active">HOME</a></li>
            <li><a href="#" data-screen="food" class="menu-item">FOOD</a></li>
            <li><a href="#" data-screen="sport" class="menu-item">SPORT</a></li>
            <li><a href="#" data-screen="graph" class="menu-item">GRAPH</a></li>
            </ul>
    </nav>
    <div class="overlay" id="overlay"></div>

    <div class="container">
        <section id="homeScreen" class="screen active">
            <section class="card summary-card">
                <h2>最新の記録</h2>
                <div id="latestRecordSummary" class="summary-grid">
                    <div class="summary-item">
                        <span class="summary-label">日付</span>
                        <span id="summaryDate" class="summary-value">-</span>
                    </div>
                    <div class="summary-item">
                        <span class="summary-label">体重</span>
                        <span id="summaryWeight" class="summary-value">-</span>
                        <span class="summary-unit">kg</span>
                    </div>
                    <div class="summary-item">
                        <span class="summary-label">体脂肪率</span>
                        <span id="summaryBodyFat" class="summary-value">-</span>
                        <span class="summary-unit">%</span>
                    </div>
                    <div class="summary-item">
                        <span class="summary-label">筋肉量</span>
                        <span id="summaryMuscleMass" class="summary-value">-</span>
                        <span class="summary-unit">kg</span>
                    </div>
                    <div class="summary-item">
                        <span class="summary-label">ウエスト</span>
                        <span id="summaryWaist" class="summary-value">-</span>
                        <span class="summary-unit">cm</span>
                    </div>
                </div>
                <p id="noLatestRecordMessage" class="no-records-message">まだ記録がありません。</p>
            </section>

            <section class="card record-form-card">
                <h2>記録入力</h2>
                <form id="trackerForm">
                    <div class="form-group">
                        <label for="date">日付</label>
                        <input type="date" id="date" required>
                    </div>
                    <div class="form-group">
                        <label for="weight">体重 (kg)</label>
                        <input type="number" id="weight" step="0.1" placeholder="75.0" required>
                    </div>
                    <div class="form-group">
                        <label for="bodyFat">体脂肪率 (%)</label>
                        <input type="number" id="bodyFat" step="0.1" placeholder="20.5">
                    </div>
                    <div class="form-group">
                        <label for="muscleMass">筋肉量 (kg)</label>
                        <input type="number" id="muscleMass" step="0.1" placeholder="55.2">
                    </div>
                    <div class="form-group">
                        <label for="waist">ウエスト (cm)</label>
                        <input type="number" id="waist" step="0.1" placeholder="92.0" required>
                    </div>
                    <button type="submit" class="button primary-button">記録する</button>
                </form>
                <p id="message" class="message"></p>
            </section>

            <section class="card record-list-card">
                <h2>記録一覧</h2>
                <div id="recordTableContainer">
                    <table id="recordsTable">
                        <thead>
                            <tr>
                                <th>日付</th>
                                <th>体重</th>
                                <th>体脂肪率</th>
                                <th>筋肉量</th>
                                <th>ウエスト</th>
                                <th>食事</th>
                                <th>運動</th>
                                <th>金額</th>
                                <th>操作</th>
                            </tr>
                        </thead>
                        <tbody>
                            </tbody>
                    </table>
                    <p id="noTableRecordsMessage" class="no-records-message">まだ記録がありません。</p>
                </div>
                <button id="clearAllRecords" class="button danger-button">全記録削除</button>
            </section>
        </section>

        <section id="foodScreen" class="screen">
            <section class="card meal-form-card">
                <h2>食事記録</h2>
                <form id="mealTrackerForm">
                    <div class="form-group">
                        <label for="mealDate">日付</label>
                        <input type="date" id="mealDate" required>
                    </div>
                    <div class="form-group">
                        <label>食事プラン</label>
                        <div id="mealPlanList" class="checklist">
                            <label><input type="checkbox" name="meal" value="朝食"> 朝食</label>
                            <label><input type="checkbox" name="meal" value="昼食"> 昼食</label>
                            <label><input type="checkbox" name="meal" value="夕食"> 夕食</label>
                            <label><input type="checkbox" name="meal" value="間食"> 間食</label>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="mealCost">食事にかかった金額 (円)</label>
                        <input type="number" id="mealCost" step="1" placeholder="例: 1500">
                    </div>
                    <button type="submit" class="button primary-button">食事を記録</button>
                </form>
                <p id="mealMessage" class="message"></p>
            </section>

            <section class="card meal-list-card">
                <h2>食事記録一覧</h2>
                <div id="mealTableContainer">
                    <table id="mealsTable">
                        <thead>
                            <tr>
                                <th>日付</th>
                                <th>食事内容</th>
                                <th>金額</th>
                                <th>操作</th>
                            </tr>
                        </thead>
                        <tbody>
                            </tbody>
                    </table>
                    <p id="noMealTableRecordsMessage" class="no-records-message">まだ食事記録がありません。</p>
                </div>
                <button id="clearAllMealRecords" class="button danger-button">全食事記録削除</button>
            </section>

             <section class="card daily-cost-summary-card">
                <h2>日ごとの合計金額</h2>
                <div id="dailyCostSummary">
                    <p id="noDailyCostMessage" class="no-records-message">合計金額の記録がありません。</p>
                </div>
            </section>
        </section>

        <section id="sportScreen" class="screen">
            <section class="card exercise-form-card">
                <h2>運動記録</h2>
                <form id="exerciseTrackerForm">
                    <div class="form-group">
                        <label for="exerciseDate">日付</label>
                        <input type="date" id="exerciseDate" required>
                    </div>
                    <div class="form-group">
                        <label>運動プラン</label>
                        <div id="exercisePlanList" class="checklist">
                            <label><input type="checkbox" name="exercise" value="ランニング(30分)"> ランニング (30分)</label>
                            <label><input type="checkbox" name="exercise" value="筋トレ(全身)"> 筋トレ (全身)</label>
                            <label><input type="checkbox" name="exercise" value="ストレッチ(20分)"> ストレッチ (20分)</label>
                            <label><input type="checkbox" name="exercise" value="ウォーキング(1時間)"> ウォーキング (1時間)</label>
                        </div>
                    </div>
                    <button type="submit" class="button primary-button">運動を記録</button>
                </form>
                <p id="exerciseMessage" class="message"></p>
            </section>

            <section class="card exercise-list-card">
                <h2>運動記録一覧</h2>
                <div id="exerciseTableContainer">
                    <table id="exercisesTable">
                        <thead>
                            <tr>
                                <th>日付</th>
                                <th>運動内容</th>
                                <th>操作</th>
                            </tr>
                        </thead>
                        <tbody>
                            </tbody>
                    </table>
                    <p id="noExerciseTableRecordsMessage" class="no-records-message">まだ運動記録がありません。</p>
                </div>
                <button id="clearAllExerciseRecords" class="button danger-button">全運動記録削除</button>
            </section>
        </section>

        <section id="graphScreen" class="screen">
            <section class="card chart-card">
                <h2>推移グラフ</h2>
                <div class="chart-controls">
                    <div class="chart-control-group">
                        <label for="chartType">表示項目:</label>
                        <select id="chartType">
                            <option value="weight">体重</option>
                            <option value="waist">ウエスト</option>
                            <option value="bodyFat">体脂肪率</option>
                            <option value="muscleMass">筋肉量</option>
                            <option value="mealCost">食事金額</option>
                        </select>
                    </div>
                    <div class="chart-control-group">
                        <label for="chartPeriod">期間:</label>
                        <select id="chartPeriod">
                            <option value="all">全期間</option>
                            <option value="7days">過去7日</option>
                            <option value="30days">過去30日</option>
                            <option value="90days">過去90日</option>
                        </select>
                    </div>
                </div>
                <canvas id="myChart"></canvas>
                <p id="noChartDataMessage" class="no-records-message">グラフ表示のためのデータがありません。</p>
            </section>
        </section>
    </div>

    <script src="script.js"></script>
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('./service-worker.js')
                    .then(registration => {
                        console.log('Service Worker registered with scope:', registration.scope);
                    })
                    .catch(err => {
                        console.error('Service Worker registration failed:', err);
                    });
            });
        }
    </script>
</body>
</html>